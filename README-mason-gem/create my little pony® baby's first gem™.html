<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>create My Little Pony® Baby's First Gem™</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1404.34">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Helvetica Neue'}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'Helvetica Neue'; min-height: 16.0px}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; background-color: #fef49c}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; background-color: #fef49c; min-height: 13.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #bc321c; background-color: #fef49c}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #a6a519; background-color: #fef49c}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #4d2cdc; background-color: #fef49c}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #27b41c; background-color: #fef49c}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #ffffff; background-color: #2a52c8}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #ffffff; background-color: #2a52c8; min-height: 13.0px}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #d0ce47; background-color: #2a52c8}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #dfdfdf; background-color: #2a52c8}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #5edce9; background-color: #2a52c8}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Helvetica}
    span.s1 {font-variant-ligatures: no-common-ligatures}
    span.s2 {font-variant-ligatures: no-common-ligatures; color: #000000}
    span.s3 {font-variant-ligatures: no-common-ligatures; color: #4d2cdc}
    span.s4 {font-variant-ligatures: no-common-ligatures; color: #a6a519}
    span.s5 {text-decoration: underline ; font-variant-ligatures: no-common-ligatures; color: #000000}
    span.s6 {text-decoration: underline ; font-variant-ligatures: no-common-ligatures; color: #27b41c}
    span.s7 {font-variant-ligatures: no-common-ligatures; color: #25b2bf}
    span.s8 {font-variant-ligatures: no-common-ligatures; color: #ffffff}
    span.s9 {font-variant-ligatures: no-common-ligatures; color: #d0ce47}
    span.s10 {font-variant-ligatures: no-common-ligatures; color: #6e0a00}
    span.s11 {font-variant-ligatures: no-common-ligatures; color: #5edce9}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><b>create My Little Pony® Baby's First Gem™</b></p>
<p class="p2"><i>2016-01-09</i></p>
<p class="p3"><br></p>
<p class="p2">Minimally, it is just 2 files in a simple hierarchy:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ tree</span></p>
<p class="p4"><span class="s1">.</span></p>
<p class="p4"><span class="s1">├── lib</span></p>
<p class="p4"><span class="s1">│&nbsp;&nbsp; └── mason.rb</span></p>
<p class="p4"><span class="s1">└── mason.gemspec</span></p>
<p class="p3"><br></p>
<p class="p2">The gem spec can apparently be complicated, according to the docs, but this simple one suffices for now:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ pygmentize mason.gemspec<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p6"><span class="s1">Gem</span><span class="s2">::</span><span class="s1">Specification</span><span class="s2">.new </span><span class="s3">do</span><span class="s2"> |s|</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.name<span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; &nbsp; </span>= </span><span class="s4">'mason'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.version <span class="Apple-converted-space">&nbsp; &nbsp; </span>= </span><span class="s4">'0.0.1'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.date<span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; &nbsp; </span>= </span><span class="s4">'2016-01-08'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.summary <span class="Apple-converted-space">&nbsp; &nbsp; </span>= </span><span class="s4">"Mason!"</span></p>
<p class="p7"><span class="s2"><span class="Apple-converted-space">&nbsp; </span>s.description = </span><span class="s1">"A personal utility gem by and for Mason."</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.authors <span class="Apple-converted-space">&nbsp; &nbsp; </span>= [</span><span class="s4">"Mason Mark"</span><span class="s1">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.email <span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>= </span><span class="s4">'<a href="mailto:mason@masonmark.com"><span class="s5">mason@masonmark.com</span></a></span><span class="s1">'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.files <span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>= [</span><span class="s4">"lib/mason.rb"</span><span class="s1">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.homepage<span class="Apple-converted-space">&nbsp; &nbsp; </span>= </span><span class="s4">'<a href="http://masonmark.com"><span class="s5">http://masonmark.com</span></a></span><span class="s1">'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>s.license <span class="Apple-converted-space">&nbsp; &nbsp; </span>= </span><span class="s4">'MIT'</span></p>
<p class="p8"><span class="s1">end</span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">...and the code itself:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ pygmentize lib/mason.rb<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p8"><span class="s1">class</span><span class="s2"> </span><span class="s6">Mason</span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p9"><span class="s2"><span class="Apple-converted-space">&nbsp; </span></span><span class="s3">def</span><span class="s2"> </span><span class="s1">boogie</span></p>
<p class="p7"><span class="s2"><span class="Apple-converted-space">&nbsp; &nbsp; </span></span><span class="s7">puts</span><span class="s2"> </span><span class="s1">"w00t w00t"</span></p>
<p class="p8"><span class="s2"><span class="Apple-converted-space">&nbsp; </span></span><span class="s1">end</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">&nbsp;&nbsp;</span></span></p>
<p class="p8"><span class="s1">end</span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">The gem spec and source code are ready; next, build the gem:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ gem build mason.gemspec<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>Successfully built RubyGem</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>Name: mason</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>Version: 0.0.1</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">&nbsp; </span>File: mason-0.0.1.gem</span></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$</span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ ls -l</span></p>
<p class="p4"><span class="s1">drwxr-xr-x<span class="Apple-converted-space">&nbsp; </span>3 mason<span class="Apple-converted-space">&nbsp; </span>staff <span class="Apple-converted-space">&nbsp; </span>102 Jan<span class="Apple-converted-space">&nbsp; </span>8 20:58 </span><span class="s3">lib</span></p>
<p class="p4"><span class="s1">-rw-r--r--<span class="Apple-converted-space">&nbsp; </span>1 mason<span class="Apple-converted-space">&nbsp; </span>staff<span class="Apple-converted-space">&nbsp; </span>4096 Jan<span class="Apple-converted-space">&nbsp; </span>9 10:03 mason-0.0.1.gem</span></p>
<p class="p4"><span class="s1">-rw-r--r--@ 1 mason<span class="Apple-converted-space">&nbsp; </span>staff <span class="Apple-converted-space">&nbsp; </span>378 Jan<span class="Apple-converted-space">&nbsp; </span>9 09:52 mason.gemspec</span></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">Cool! The gem is built.</p>
<p class="p3"><br></p>
<p class="p2">Now how can we use it? Well, if we were lame, we could install it globally on the local machine like this:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ sudo gem install ./Mason-0.0.1.gem</span></p>
<p class="p4"><span class="s1">Password:</span></p>
<p class="p4"><span class="s1">Successfully installed mason-0.0.1</span></p>
<p class="p4"><span class="s1">Parsing documentation for mason-0.0.1</span></p>
<p class="p4"><span class="s1">Installing ri documentation for mason-0.0.1</span></p>
<p class="p4"><span class="s1">1 gem installed</span></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">And then use it like this:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ irb</span></p>
<p class="p4"><span class="s1">irb(main):001:0&gt; require 'mason'</span></p>
<p class="p4"><span class="s1">=&gt; true</span></p>
<p class="p4"><span class="s1">irb(main):002:0&gt; foo = Mason.new</span></p>
<p class="p4"><span class="s1">=&gt; #&lt;Mason:0x007fb1a2a253b8&gt;</span></p>
<p class="p4"><span class="s1">irb(main):003:0&gt; foo.boogie</span></p>
<p class="p4"><span class="s1">w00t w00t</span></p>
<p class="p4"><span class="s1">=&gt; nil</span></p>
<p class="p4"><span class="s1">irb(main):004:0&gt; ^D</span></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">But that's not what we are trying to accomplish, so:</p>
<p class="p3"><br></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$ sudo gem uninstall Mason</span></p>
<p class="p4"><span class="s1">Password:</span></p>
<p class="p4"><span class="s1">Successfully uninstalled Mason-0.0.1</span></p>
<p class="p4"><span class="s1">[mason@MacBook-Pro-No mason-gem]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">What we actually want to do is require this gem in a Gemfile used with Bundler. The good and easy way to do that is to put it on my own Github, since Bundler has built-in support for referencing GitHUb-hosted gems in the Gemfile.</p>
<p class="p3"><br></p>
<p class="p2">But even easier at this stage (since this gem isn't yet on GitHub) is just requiring it locally via absolute path. Here is the working setup with a throwaway test project:</p>
<p class="p3"><br></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$ tree</span></p>
<p class="p10"><span class="s1">.</span></p>
<p class="p10"><span class="s1">├── Gemfile</span></p>
<p class="p10"><span class="s1">└── test.rb</span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p10"><span class="s1">0 directories, 2 files</span></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">The minimum setup to use the gem in isolation via Bundler is a Gemfile to specify the gem, and a ruby script to run.</p>
<p class="p3"><br></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$ pygmentize -l ruby Gemfile</span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p12"><span class="s8">gem </span><span class="s1">"mason"</span><span class="s8">, </span><span class="s1">path</span><span class="s8">: </span><span class="s1">"../mason-gem/"</span><span class="s8"><span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p13"><span class="s8"><span class="Apple-converted-space">&nbsp; </span></span><span class="s1"># path is to parent dir, not gem itself</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">&nbsp;&nbsp;</span></span></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">For this exercise, we've specified only the mason gem. Then we require it in the source code for our project:</p>
<p class="p3"><br></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$ pygmentize test.rb<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p13"><span class="s1">#! /usr/bin/env ruby</span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p14"><span class="s1">require</span><span class="s8"> </span><span class="s9">'mason'</span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p10"><span class="s1">foo = </span><span class="s10">Mason</span><span class="s1">.new</span></p>
<p class="p12"><span class="s11">puts</span><span class="s8"> </span><span class="s1">"Here's a Mason instance: #{</span><span class="s8">foo</span><span class="s1">}"</span></p>
<p class="p12"><span class="s11">puts</span><span class="s8"> </span><span class="s1">"Will it boogie?"</span></p>
<p class="p10"><span class="s1">foo.boogie</span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p3"><br></p>
<p class="p2">Next, run it with Bundler. It seems that no 'bundle install' command is even necessary with this minimal setup.</p>
<p class="p3"><br></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$ bundle exec ./test.rb<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p10"><span class="s1">Here's a Mason instance: #&lt;Mason:0x007feeb292e1b0&gt;</span></p>
<p class="p10"><span class="s1">Will it boogie?</span></p>
<p class="p10"><span class="s1">w00t w00t</span></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p3"><br></p>
<p class="p2">Boogie. Of course, it won't run without Bundler, because the gem is not installed on the local system:</p>
<p class="p3"><br></p>
<p class="p11"><span class="s1"></span><br></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$ ./test.rb<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p10"><span class="s1">/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- mason (LoadError)</span></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span>from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'</span></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span>from ./test.rb:3:in `&lt;main&gt;'</span></p>
<p class="p10"><span class="s1">[mason@MacBook-Pro-No test-the-gem-bro]$<span class="Apple-converted-space">&nbsp;</span></span></p>
<p class="p3"><br></p>
<p class="p2">That's as it should be.</p>
<p class="p3"><br></p>
<p class="p2">For my next stupendous trick, I think I will put this gem on Github and then use it from there.</p>
<p class="p3"><br></p>
<p class="p15"><img src="create%20my%20little%20pony%C2%AE%20baby's%20first%20gem%E2%84%A2.thumb_IMG_1855_1024.jpg" width="1024" height="768" alt="thumb_IMG_1855_1024.jpg"></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
</body>
</html>
